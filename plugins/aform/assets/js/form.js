!function(a){function e(a,e){for(var t=e.length,i=0;i<t;i++)if(e[i]==a)return!0;return!1}!function(){return"function"!=typeof window.CustomEvent&&void(window.CustomEvent=function(a,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var t=document.createEvent("CustomEvent");return t.initCustomEvent(a,e.bubbles,e.cancelable,e.detail),t})}();var t={};t.fileapi=void 0!==a("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData,userAgent=navigator.userAgent||navigator.vendor||window.opera,1==t.fileapi&&window.FileReader&&window.FileList&&window.Blob&&(t.allpass=!0);var i=document.cookie;i=i.replace(/(?:(?:^|.*;\s*)__formUtmTracking\s*\=\s*([^;]*).*$)|^.*$/,"$1"),""!=i&&console.info("UTM Found : "+i);var n=function(){var a=function(a,e){return new Date(e,a,0).getDate()},e=function(e,t){var i=e.split("/");if(i.length<3)return 0;switch(t){case"dd/mm/yyyy":var n=parseInt(i[0],10),r=parseInt(i[1],10),s=parseInt(i[2],10);break;case"mm/dd/yyyy":var r=parseInt(i[0],10),n=parseInt(i[1],10),s=parseInt(i[2],10);break;case"yyyy/mm/dd":var s=parseInt(i[0],10),r=parseInt(i[1],10),n=parseInt(i[2],10)}if(r>12||r<1)return 0;var l=a(r,s);if(n>l)return 0;var o=s.toString().length;if(4!=o)return 0;var d=new Date(s,r-1,n);return d="Invalid Date"!=d?1:0};return function(a,t){return e(a,t)}}();a.validator.addMethod("filesize",function(e,t,i){if(""==e)return this.optional(t);var n=t.getAttribute("data-filesize");return n<=i?a(t).parent().removeClass("file-not-valid"):a(t).parent().removeClass("file-is-valid").addClass("file-not-valid"),this.optional(t)||n<=i}),a.validator.addMethod("realextension",function(t,i,n){if(""==t)return this.optional(i);var r=i.getAttribute("data-realmime");if(null==r)return!0;var s=n.split("|");return e(r,s)?a(i).parent().removeClass("file-not-valid"):a(i).parent().removeClass("file-is-valid").addClass("file-not-valid"),this.optional(i)||e(r,s)}),a.validator.addMethod("datevalidation",function(a,e,t){return""==a?this.optional(e):this.optional(e)||n(a,t)}),0==t.allpass&&console.log("legacy");var r=function(){this.whaleCall=function(e,t,n){var r=this;n=JSON.stringify(n),a.ajax({url:afData.afAjaxUrl,data:{action:"aformPublic",method:"dolphin",form:n,utmtracking:i,iframe:!0},files:t,iframe:!0,dataType:"json"}).done(function(a){r.ajaxDone(e,a)}).fail(function(a){alert("Unable to process form")})},this.dolphinCall=function(e,t,n){var r=this;t=JSON.stringify(t),n.append("action","aformPublic"),n.append("method","dolphin"),n.append("form",t),n.append("utmtracking",i),a.ajax({url:afData.afAjaxUrl,type:"post",data:n,processData:!1,contentType:!1}).done(function(a){r.ajaxDone(e,a)}).fail(function(a){alert("Unable to process form (500)")})},this.ajaxDone=function(e,t){if(a(e.form).removeClass("ajax-active"),"string"==typeof t){var i=/^\{/i,n=t.match(i);n instanceof Array&&(t=JSON.parse(t))}if("object"==typeof t&&"success"in t)if(0==t.success){a(e.form).find('input[type="submit"]').prop("disabled",!1),a(e.form).find('input[type="submit"]').val(e.submitText);var r=t.data.message;if("invalid-fields"in t.data){var s=Object.values(t.data["invalid-fields"]).join(",");r=r+":<br> "+s}a(e.form).find(".ajaxfail--response--message").html("<p><small>"+r+"</small></p>").show()}else e.postProcess(t.data);else a(e.form).find('input[type="submit"]').prop("disabled",!1),a(e.form).find('input[type="submit"]').val(e.submitText),a(e.form).find(".ajaxfail--response--message").html("<p><small>Response data not found</small></p>").show()}},s=new r;this.aformPublic=function(e){aformPublic.prototype.robotic=function(e){/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream&&(a('.stopyenoh input[type="text"]',e).prop("type","password"),a('.stopyenoh input[type="password"]',e).prop("autocomplete","new-password")),a(e).on("blur","input",function(t){var i=a(e).find('input[name="thefaxnumber9tX4bPz"]').val(),n=a(e).find('input[name="contact_by_fax"]').prop("checked");""!=i&&a(e).find('input[name="thefaxnumber9tX4bPz"]').val(""),1==n&&a(e).find('input[name="contact_by_fax"]').prop("checked",!1),""!=i&&1==n&&a(e).off("blur","input")}),a(e).on("mousemove",function(t){var i=a(e).find('input[name="thefaxnumber9tX4bPz"]').val(),n=a(e).find('input[name="contact_by_fax"]').prop("checked");""!=i&&a(e).find('input[name="thefaxnumber9tX4bPz"]').val(""),1==n&&a(e).find('input[name="contact_by_fax"]').prop("checked",!1)})};var n=this,r=(a(e).find("input"),a(e).data("form-id")),o=aformRules[r],d=null,f=null,p=new CustomEvent("aformAfterSubmit");1==t.allpass&&null==f&&(f=new FormData),n.form=e,n.submitText=a(e).find('input[type="submit"]').val(),this.submitBtn=a(".submit-btn",a(e)),n.robotic(e);var m=a(e).validate({errorElement:"span",errorPlacement:function(e,t){"INPUT"==t[0].tagName&&("file"==t[0].type?a(e).insertBefore(t):e.appendTo(t.parents(".field-wrap")))},submitHandler:function(e){var i=a(".robotic input",e),r=a(i[0]),o=a(i[1]);return""==r[0].value&&0==o[0].checked?(a(e).find(".ajaxfail--response--message").html("").hide(),a(e).addClass("ajax-active").find('input[type="submit"]').prop("disabled",!0),a(e).find('input[type="submit"]').val("Processing"),1==t.allpass?(postedFormData=a(e).serializeArray(),s.dolphinCall(n,postedFormData,f)):(d=a(e).find(":file"),fileDataLength=d.length,haveFiles=0,fileDataLength>0&&d.each(function(t,i){l=t+1,""!=i.value&&haveFiles++,fileDataLength==l&&(haveFiles<=0&&(d=a("<input type='file'/>")),formData=a(e).serializeArray(),s.whaleCall(n,d,formData))}))):(a(e).find(".ajaxfail--response--message").html("<p><small>For security reasons, please fill out form manually without auto complete. <br>Refresh to try again.</small></p>").show(),a(e).removeClass("ajax-active").find('input[type="submit"]').prop("disabled",!1),console.info("sorry , no robots allowed")),!1}});if(this.fileChunked=function(a,e){return a.slice(0,e)},this.postProcess=function(t){"string"==typeof t&&(t=JSON.parse(t));var s=t,l=afData.blogurl,o=s.url;if("use_ajax"in s&&s.use_ajax){""!=i&&(document.cookie="__formUtmTracking=;expires=0;path=/");var d=a(e),f='<div class="aforms_confirmation_message">';f+=void 0!=s.confirmation_message&&""!=s.confirmation_message?s.confirmation_message:"<h2>Thank You</h2>",f+="</div>",f=a(f).attr("id","sf-message-"+a(e).attr("data-form-id")),d.attr("style","overflow: hidden").removeClass("ajax-active"),d.animate({height:"0px"},500,function(){d.after(f),d[0].reset(),d.remove()}),"undefined"!=typeof ga&&(o.indexOf(l)>-1&&(o=o.replace(l,"")),0!=o.indexOf("/")&&(o="/"+o),ga("send","pageview",o),gtag("config",ga.getAll()[0].get("trackingId"),{page_path:o})),n.afterPostMessage(n,a(e).attr("data-form-id"),t),p.initCustomEvent("aformAfterSubmit",!0,!0,{instance:n,formid:a(e).attr("data-form-id"),response:t}),e.dispatchEvent(p)}else if(o.indexOf(l)<0&&(o=0!=o.indexOf("/")?l+"/"+o:l+o),0==s.redirectwithpost)window.location.href=o;else{var m='<div style="visibility:hidden;width:0;height:0;overflow:hidden;">';m+='<form id="af__rd__form" action="'+o+'" method="POST">',m+='<input type="hidden" name="aform-redirect-post[submission_id]" value="'+s.submissionid+'">',m+='<input type="hidden" name="aform-redirect-post[form_id]" value="'+r+'">',m+="</form>",m+="</form>",m+="</div>",a("body").append(m),a("#af__rd__form").submit()}},void 0!=typeof o){o=o.rules;for(var u in o)if(o.hasOwnProperty(u)){rules=o[u];var v=a("input:not(.sf-file)",".field-"+u);if(v.length>0)for(var c in rules)if(rules.hasOwnProperty(c)){var h={};h[c]=rules[c],"datevalidation"==c&&(h.messages={datevalidation:"Invalid Date"}),v.rules("add",h)}var y=a("input.sf-file",".field-"+u);y.length>0&&y.each(function(e,t){for(var i in rules)if(rules.hasOwnProperty(i)){var n={};if(n[i]=rules[i],"filesize"==i&&(n.messages={filesize:"File Size must be less than "+n.filesize+"KB "}),"realextension"==i){var r=n.realextension,s=/(\|)/g;n.messages={realextension:"Please enter a valid file: <i>."+r.replace(s," .")+"</i>"}}a('input[name="'+t.name+'"]').rules("add",n)}})}}var g=a(e).find("input:file");g.on("change",function(i){var r=a(this),s=this,l=r.attr("data-name");if(r.hasClass("error")&&r.prev().remove(),1==t.allpass){if(0==s.files.length)return r.prev().remove(),r.parent("span").removeClass("file-not-valid file-is-validating file-is-valid"),void a(e).removeClass("ajax-file-validation");a(e).addClass("ajax-file-validation"),r.parent("span").addClass("file-is-validating"),r.parent("span").removeClass("file-not-valid file-is-valid");var o=s.files[0],d=n.fileChunked(o,150),p=new FileReader;p.onloadend=function(t){t.target.readyState===FileReader.DONE&&a.ajax({url:afData.afAjaxUrl,type:"POST",dataType:"json",cache:!1,data:{action:"aformPublic",method:"dolphinValidatesFile",filedata:t.target.result,filetype:o.type,filename:o.name}}).done(function(t){"data"in t&&"mime"in t.data?(r.attr("data-realmime",t.data.mime),r.attr("data-filesize",r.get(0).files[0].size/1024),setTimeout(function(){a(e).removeClass("ajax-file-validation"),null!=t.data.mime&&m.element(r),setTimeout(function(){r.parent().hasClass("file-not-valid")||(r.parent().removeClass("file-not-valid").addClass("file-is-valid"),f.append(l,r.get(0).files[0]),console.info("file is valid")),r.parent().removeClass("file-is-validating")},500)},500)):alert("file validation has failed")}).fail(function(a){alert("file validation has failed")})},p.readAsDataURL(d)}else a(e).addClass("ajax-file-validation"),r.parent("span").addClass("file-is-validating"),r.parent("span").removeClass("file-not-valid file-is-valid"),a.ajax({url:afData.afAjaxUrl,data:{action:"aformPublic",method:"whaleValidatesFile",iframe:!0},files:s,iframe:!0,dataType:"json"}).done(function(t){"data"in t&&"mime"in t.data&&"filesize"in t.data?(r.attr("data-realmime",t.data.mime),r.attr("data-filesize",t.data.filesize/1024),setTimeout(function(){a(e).removeClass("ajax-file-validation"),null!=t.data.mime&&m.element(r),r.parent("span").hasClass("file-not-valid")||r.parent("span").removeClass("file-not-valid").addClass("file-is-valid"),r.parent("span").removeClass("file-is-validating")},250)):alert("file validation has failed")}).fail(function(a){alert("file validation has failed")})}),a(".max-select-set","#"+e.id).on("change",function(){var e=a('[name="'+a(this).attr("name")+'"]'),t=e.filter(":checked"),i=e.filter(":not(:checked)");t.length>=e.data("max-selectable")?i.prop("disabled",!0):i.prop("disabled",!1)});var b=a(".range-inputtype","#"+e.id);b.length>0&&b.on("change",function(){var e=a(this);e.parents(".field-wrap").find(".range-inputtype-currentvalue").find("span").html(e.val())}),a(".date-inputtype-format","#"+e.id).bind("keyup",function(e){var t=e.keyCode||e.charCode;if(8==t||46==t)return!1;var i=a(this).val().length,n=a(this).data("useFormat");switch(n){case"dd/mm/yyyy":case"mm/dd/yyyy":if(2===i||5===i){var r=a(this).val();r+="/",a(this).val(r)}break;case"yyyy/mm/dd":if(4===i||7===i){var r=a(this).val();r+="/",a(this).val(r)}}if(i>=11){var s=a(this).val();a(this).val(s.substr(0,10))}}),a(e).append('<div style="color:red;display:none;" class="ajaxfail--response--message"></div>'),""!=i&&a(e).attr("data-utm-tracking",i),aformPublic.prototype.afterPostMessage=function(a,e,t){}},a(function(){var e=a("form.aform");e.each(function(a,e){new aformPublic(this)})})}(jQuery);