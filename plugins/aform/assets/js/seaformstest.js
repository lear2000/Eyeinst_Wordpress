!function(a){var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var t=function(){this.ajax=function(e,t){a.ajax({url:sfAjax.sfAjaxUrl,type:"post",data:{action:"submitForm",form:t}}).done(function(a){e.postProcess(a.data)})},this.fileIframe=function(e,t,i){a.ajax({url:sfAjax.sfAjaxUrl,data:{action:"submitfiles",iframe:!0},files:t,iframe:!0,dataType:"json"}).done(function(a){var t=a.data,r=t.length;a.data.forEach(function(a,t){var n=t+1;i.push(a),n==r&&(i=JSON.stringify(i),e.processForm(e,i))})})},this.fileAjax=function(e,t,i){t.append("action","submitfiles"),a.ajax({url:sfAjax.sfAjaxUrl,type:"post",data:t,processData:!1,contentType:!1}).done(function(a){var t=a.data,r=t.length;a.data.forEach(function(a,t){var n=t+1;i.push(a),n==r&&(i=JSON.stringify(i),e.processForm(e,i))})})}},i=new t,r=function(t){var r=this,n=(a(t).find("input"),a(t).data("form-id")),o=seaformRules[n];this.submitBtn=a(".submit-btn",a(t));var s=null;if(a(t).validate({errorElement:"span",errorPlacement:function(a,e){a.appendTo(e.parents(".field-wrap"))},submitHandler:function(t){return 1==e.fileapi&&1==e.formdata?null!=s?(console.log("WEB API : FormData , File"),formData=a(t).serializeArray(),i.fileAjax(r,s,formData)):(console.log("processForm"),formData=JSON.stringify(a(t).serializeArray()),r.processForm(r,formData)):(console.log("IFRAME : FILE "),s=a(t).find(":file"),fileDataLength=s.length,haveFiles=0,fileDataLength>0&&s.each(function(e,n){l=e+1,""!=n.value&&haveFiles++,fileDataLength==l&&(haveFiles>0?(formData=a(t).serializeArray(),i.fileIframe(r,s,formData)):(console.log("processForm"),formData=JSON.stringify(a(t).serializeArray()),r.processForm(r,formData)))})),!1}}),this.processForm=function(a,e){i.ajax(a,e)},this.postProcess=function(e){var i=JSON.parse(e);if(i.use_ajax){var r=void 0!=i.confirmation_message&&""!=i.confirmation_message?i.confirmation_message:'<p><img src="http://i.ytimg.com/vi/JDbVJvlW-BM/hqdefault.jpg" /></p><h2>Ding! Fries are Done!</h2>',n=a(t);n.attr("style","overflow: hidden"),n.animate({height:"0px"},500,function(){n.after(r),n[0].reset(),n.remove()}),"undefined"!=typeof ga&&(console.log("loggy"),ga("send","pageview",i.url))}else window.location.href=i.url},void 0!=typeof o){o=o.rules;for(var f in o)if(o.hasOwnProperty(f)){rules=o[f];var c=a("input:not(.sf-file)",".field-"+f);if(c.length>0){console.log("normal field");for(var u in rules)if(rules.hasOwnProperty(u)){var m={};m[u]=rules[u],c.rules("add",m)}}var p=a("input.sf-file",".field-"+f);p.length>0&&p.each(function(e,t){for(var i in rules)if(rules.hasOwnProperty(i)){var r={};r[i]=rules[i],a('input[name="'+t.name+'"').rules("add",r)}})}}if(1==e.fileapi&&1==e.formdata){var d=a(t).find('input[type="file"]');d.on("change",function(e){var t=a(this),i=t.attr("data-name");null==s?(s=new FormData,s.append(i,t.get(0).files[0])):s.append(i,t.get(0).files[0])})}var h=a(".max-select-set");h.on("change",function(){var e=a('[name="'+a(this).attr("name")+'"]');console.log(e);var t=e.filter(":checked"),i=e.filter(":not(:checked)");t.length>=e.data("max-selectable")?i.prop("disabled",!0):i.prop("disabled",!1)})},n=a(".seaforms");n.each(function(){new r(this)})}(jQuery),console.log("testing");